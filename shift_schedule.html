<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>æŸ¥è©¢ç­è¡¨</title>
  <style>
    body {
      font-family: "Microsoft JhengHei", sans-serif;
      background-color: #f8f9fa;
      padding: 10px;
    }

    h2 {
      text-align: center;
    }

    .date-select {
      text-align: center;
      margin-bottom: 20px;
    }

    input[type="date"] {
      font-size: 1em;
      padding: 6px;
    }

    .schedule-grid {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 20px;
    }

    .column {
      flex: 1 1 300px;
      max-width: 100%;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .shift-row {
      display: flex;
      border-radius: 8px;
      overflow: hidden;
      background-color: white;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
    }

    .shift-label {
      flex: 1;
      padding: 8px;
      text-align: center;
      font-weight: bold;
      color: #fff;
      white-space: nowrap;
      min-width: 40%;
    }

    .staff-name {
      flex: 1;
      padding: 8px;
      background-color: #eee;
      text-align: center;
      white-space: nowrap;
    }

    .red { background-color: #c00000; }
    .green { background-color: #275317; }
    .blue { background-color: #163E64; }
    .middle-blue { background-color: #215F9A; }
    .light-blue { background-color: #4E95D9; }
    .purple { background-color: #78206E; }
    .middle-green { background-color: #3B7D23; }
    .blue-green { background-color: #0E9292; }
    .gray { background-color: #595959; }

    footer {
      text-align: center;
      margin-top: 40px;
      font-size: 0.9em;
      color: #666;
    }

    #update-time {
      text-align: center;
      margin-top: 10px;
      color: #888;
      font-size: 0.9em;
    }
  </style>
</head>
<body>

  <h2>ğŸ“… æŸ¥è©¢ç­è¡¨</h2>

  <div class="date-select">
    <label for="date">é¸æ“‡æ—¥æœŸï¼š</label>
    <input type="date" id="date" />
  </div>

  <div class="schedule-grid">
    <!-- å·¦å´ -->
    <div class="column" id="left-column"></div>
    <!-- å³å´ -->
    <div class="column" id="right-column"></div>
  </div>

  <div id="update-time"></div>

  <footer>
    Â© 2025 è‡ºå—éƒµå±€é‹è¼¸è‚¡ All rights reserved. ç¶²é è¨­è¨ˆèˆ‡ç³»çµ±é–‹ç™¼ï¼šæ“´æœå‰µæ„ç§‘æŠ€æœ‰é™å…¬å¸
  </footer>

  <script>
    const shiftListLeft = [
      { label: "è‚¡ã€€é•·", color: "red" },
      { label: "æ—©ç­å°ˆå“¡", color: "green" },
      { label: "å…§æª¯ç¶“è¾¦", color: "blue" },
      { label: "ç©ºè¢‹æ«ƒ", color: "green" },
      { label: "æ—©ã€€ç­ 1", color: "green" },
      { label: "æ—©1(å…­æ—¥)", color: "green" },
      { label: "æ—©ã€€ç­ 2", color: "green" },
      { label: "æ—©ã€€ç­ 3", color: "green" },
      { label: "æ—©3(æ—¥)", color: "green" },
      { label: "æ—©ã€€ç­ 4", color: "blue-green" },
      { label: "æ–°ã€€ç‡Ÿ 1", color: "blue-green" },
      { label: "æ–°ã€€ç‡Ÿ 2", color: "blue-green" },
      { label: "è‡ªé‹ç”²ç·š", color: "purple" },
      { label: "è‡ªé‹ä¹™ç·š", color: "purple" },
      { label: "å˜‰ã€€ç¾© B", color: "blue" },
      { label: "é€²å£æ¥é€", color: "gray" },
      { label: "å‡ºå£æ¥é€", color: "gray" }
    ];

    const shiftListRight = [
      { label: "ä¸­ç­å°ˆå“¡", color: "blue" },
      { label: "ä¸­ã€€ç­ 1", color: "light-blue" },
      { label: "ä¸­1(å…­æ—¥)", color: "light-blue" },
      { label: "ä¸­ã€€ç­ 2", color: "middle-blue" },
      { label: "ä¸­ã€€ç­ 3", color: "middle-blue" },
      { label: "ä¸­ã€€ç­ 4", color: "middle-blue" },
      { label: "ä¸­ã€€ç­ 5", color: "middle-blue" },
      { label: "ä¸­ã€€ç­ 6", color: "middle-blue" },
      { label: "ä¸­ã€€ç­ 7", color: "blue" },
      { label: "ä¸­ã€€ç­ 8", color: "light-blue" },
      { label: "ä¸­ã€€ç­ 9", color: "middle-blue" },
      { label: "ä¸­ã€€ç­10", color: "light-blue" },
      { label: "ä¸­ã€€ç­11", color: "light-blue" },
      { label: "ä¸­ã€€ç­12", color: "light-blue" },
      { label: "å¤§å¤œç­ 1", color: "gray" },
      { label: "å¤œ1(å…­æ—¥)", color: "gray" },
      { label: "å¤§å¤œç­ 3", color: "gray" }
    ];

    const createRow = (shift, name) => {
      return `
        <div class="shift-row">
          <div class="shift-label ${shift.color}">${shift.label}</div>
          <div class="staff-name">${name || 'ï¼'}</div>
        </div>`;
    };

    const renderSchedule = (data = {}) => {
      const left = document.getElementById('left-column');
      const right = document.getElementById('right-column');
      left.innerHTML = shiftListLeft.map(s => createRow(s, data[s.label])).join('');
      right.innerHTML = shiftListRight.map(s => createRow(s, data[s.label])).join('');
    };

    const fetchSchedule = (selectedDate) => {
      fetch('schedule_data.json')
        .then(res => {
          const lastModified = res.headers.get("Last-Modified");
          if (lastModified) {
            document.getElementById("update-time").innerText = "è³‡æ–™æ›´æ–°æ™‚é–“ï¼š" + new Date(lastModified).toLocaleString();
          }
          return res.json();
        })
        .then(allData => {
          const schedule = allData[selectedDate];
          if (schedule) {
            renderSchedule(schedule);
          } else {
            renderSchedule();
            alert('è©²æ—¥æœŸç„¡æ’ç­è³‡æ–™');
          }
        })
        .catch(err => console.error('è®€å–å¤±æ•—', err));
    };

    document.addEventListener("DOMContentLoaded", function () {
      const dateInput = document.getElementById("date");
      const today = new Date().toISOString().split("T")[0];
      dateInput.value = today;
      fetchSchedule(today);

      dateInput.addEventListener('change', function () {
        fetchSchedule(this.value);
      });
    });
  </script>

</body>
</html>
