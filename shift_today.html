<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>本日班表查詢</title>
    <style>
      body {
        background-color: #f8f9fa;
        font-family: "Microsoft JhengHei", sans-serif;
        padding: 10px;
        margin: 0;
      }

      .container {
        margin: 0 auto;
        padding-left: 10%;
        padding-right: 10%;
      }

      h2 {
        text-align: center;
        margin-bottom: 20px;
        font-size: 1.5em;
      }

      .schedule-grid {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 20px;
      }

      .column {
        flex: 1 1 300px;
        max-width: 100%;
        display: flex;
        flex-direction: column;
        gap: 10px;
      }

      .shift-row {
        display: flex;
        align-items: stretch;
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
        background-color: white;
      }

      .shift-label {
        flex: 1;
        padding: 8px;
        text-align: center;
        font-weight: bold;
        color: #fff;
        white-space: nowrap;
        min-width: 40%;
      }

      .staff-name {
        flex: 1;
        padding: 8px;
        background-color: #eee;
        text-align: center;
        white-space: nowrap;
      }

      .red {
        background-color: #c00000;
      }

      .green {
        background-color: #275317;
      }

      .blue {
        background-color: #163e64;
      }

      .middle-blue {
        background-color: #215f9a;
      }

      .light-blue {
        background-color: #4e95d9;
      }

      .purple {
        background-color: #78206e;
      }

      .middle-green {
        background-color: #3b7d23;
      }

      .blue-green {
        background-color: #0e9292;
      }

      .gray {
        background-color: #595959;
      }

      .orange {
        background-color: #c04f15;
      }

      @media (max-width: 480px) {
        .shift-label,
        .staff-name {
          font-size: 18px;
          padding: 6px;
        }

        .schedule-grid {
          gap: 12px;
        }

        .column {
          flex: 1 1 100%;
        }

        .container {
          padding-left: 5%;
          padding-right: 5%;
        }
      }

      footer {
        text-align: center;
        padding: 20px 10px;
        font-size: 0.85em;
        color: #999;
      }
    </style>
  </head>

  <body>
    <div class="container">
      <h2 id="todayTitle">本日班表查詢</h2>
      <p
        id="updateInfo"
        style="text-align: center; color: #888; font-size: 0.85em"
      ></p>

      <div class="schedule-grid">
        <!-- 左欄 -->
        <div class="column">
          <div class="shift-row">
            <div class="shift-label red">股　長</div>
            <div class="staff-name">－</div>
          </div>
          <div class="shift-row">
            <div class="shift-label green">早班專員</div>
            <div class="staff-name">－</div>
          </div>
          <div class="shift-row">
            <div class="shift-label blue">內檯經辦</div>
            <div class="staff-name">－</div>
          </div>
          <div class="shift-row">
            <div class="shift-label green">空袋櫃</div>
            <div class="staff-name">－</div>
          </div>
          <div class="shift-row">
            <div class="shift-label green">早　班 1</div>
            <div class="staff-name">－</div>
          </div>
          <div class="shift-row">
            <div class="shift-label green">早1(六日)</div>
            <div class="staff-name">－</div>
          </div>
          <div class="shift-row">
            <div class="shift-label green">早　班 2</div>
            <div class="staff-name">－</div>
          </div>
          <div class="shift-row">
            <div class="shift-label green">早　班 3</div>
            <div class="staff-name">－</div>
          </div>
          <div class="shift-row">
            <div class="shift-label green">早3(六)</div>
            <div class="staff-name">－</div>
          </div>
          <div class="shift-row">
            <div class="shift-label blue-green">早　班 4</div>
            <div class="staff-name">－</div>
          </div>
          <div class="shift-row">
            <div class="shift-label blue-green">新　營 1</div>
            <div class="staff-name">－</div>
          </div>
          <div class="shift-row">
            <div class="shift-label blue-green">新　營 2</div>
            <div class="staff-name">－</div>
          </div>
          <div class="shift-row">
            <div class="shift-label purple">自運甲線</div>
            <div class="staff-name">－</div>
          </div>
          <div class="shift-row">
            <div class="shift-label purple">自運乙線</div>
            <div class="staff-name">－</div>
          </div>
          <div class="shift-row">
            <div class="shift-label blue">嘉　義 B</div>
            <div class="staff-name">－</div>
          </div>
          <div class="shift-row">
            <div class="shift-label gray">進口接送</div>
            <div class="staff-name">－</div>
          </div>
          <div class="shift-row">
            <div class="shift-label gray">出口接送</div>
            <div class="staff-name">－</div>
          </div>
          <div class="shift-row">
            <div class="shift-label orange">支　援 1</div>
            <div class="staff-name">－</div>
          </div>
          <div class="shift-row">
            <div class="shift-label orange">支　援 2</div>
            <div class="staff-name">－</div>
          </div>
        </div>

        <!-- 右欄 -->
        <div class="column">
          <div class="shift-row">
            <div class="shift-label blue">中班專員</div>
            <div class="staff-name">－</div>
          </div>
          <div class="shift-row">
            <div class="shift-label light-blue">中　班 1</div>
            <div class="staff-name">－</div>
          </div>
          <div class="shift-row">
            <div class="shift-label light-blue">中1(六日)</div>
            <div class="staff-name">－</div>
          </div>
          <div class="shift-row">
            <div class="shift-label middle-blue">中　班 2</div>
            <div class="staff-name">－</div>
          </div>
          <div class="shift-row">
            <div class="shift-label middle-blue">中　班 3</div>
            <div class="staff-name">－</div>
          </div>
          <div class="shift-row">
            <div class="shift-label middle-blue">中　班 4</div>
            <div class="staff-name">－</div>
          </div>
          <div class="shift-row">
            <div class="shift-label middle-blue">中　班 5</div>
            <div class="staff-name">－</div>
          </div>
          <div class="shift-row">
            <div class="shift-label middle-blue">中　班 6</div>
            <div class="staff-name">－</div>
          </div>
          <div class="shift-row">
            <div class="shift-label blue">中　班 7</div>
            <div class="staff-name">－</div>
          </div>
          <div class="shift-row">
            <div class="shift-label light-blue">中　班 8</div>
            <div class="staff-name">－</div>
          </div>
          <div class="shift-row">
            <div class="shift-label middle-blue">中　班 9</div>
            <div class="staff-name">－</div>
          </div>
          <div class="shift-row">
            <div class="shift-label light-blue">中　班10</div>
            <div class="staff-name">－</div>
          </div>
          <div class="shift-row">
            <div class="shift-label light-blue">中　班11</div>
            <div class="staff-name">－</div>
          </div>
          <div class="shift-row">
            <div class="shift-label light-blue">中　班12</div>
            <div class="staff-name">－</div>
          </div>
          <div class="shift-row">
            <div class="shift-label gray">大夜班 1</div>
            <div class="staff-name">－</div>
          </div>
          <div class="shift-row">
            <div class="shift-label gray">夜1(六日)</div>
            <div class="staff-name">－</div>
          </div>
          <div class="shift-row">
            <div class="shift-label gray">大夜班 3</div>
            <div class="staff-name">－</div>
          </div>
          <div class="shift-row">
            <div class="shift-label orange">支　援 3</div>
            <div class="staff-name">－</div>
          </div>
          <div class="shift-row">
            <div class="shift-label orange">支　援 4</div>
            <div class="staff-name">－</div>
          </div>
        </div>
      </div>
    </div>

    <script>
      async function loadSchedule() {
        const today = new Date();
        const todayStr =
          today.getFullYear() +
          "-" +
          String(today.getMonth() + 1).padStart(2, "0") +
          "-" +
          String(today.getDate()).padStart(2, "0");
        const displayDate = todayStr.replace(/-/g, "/");

        // 新增：取得星期幾
        const weekdays = ["日", "一", "二", "三", "四", "五", "六"];
        const dayOfWeek = weekdays[today.getDay()];

        document.getElementById(
          "todayTitle"
        ).textContent = `【本日班表】${displayDate} (${dayOfWeek})`;

        try {
          const response = await fetch("schedule_data.json");
          const data = await response.json();
          const todayData = data[todayStr];
          if (!todayData) {
            alert("找不到今天的班表資料。");
            return;
          }

          document.querySelectorAll(".shift-row").forEach((row) => {
            const label = row
              .querySelector(".shift-label")
              ?.textContent?.trim();
            if (label && todayData[label] !== undefined) {
              row.querySelector(".staff-name").textContent = todayData[label];
            }
          });
        } catch (err) {
          alert("載入班表資料失敗：" + err.message);
        }
      }

      window.onload = loadSchedule;
    </script>

    <footer>
      <div>© 2025 臺南郵局運輸股</div>
      <div>僅供內部使用，未經授權不得轉載</div>
    </footer>
  </body>
</html>
